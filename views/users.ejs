<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>xxx项目管理后台</title>
    <link rel="stylesheet" href="/bli/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/users.css">

</head>

<body>
    <!-- container的样式可以写在公共样式 common -->
    <div class="container">
        <!-- 头部 -->
        <%- include('./common/head.ejs') %>


        <!-- 中部 -->
        <div class="lyj-main">
            <!-- 左边 -->
            <%- include('./common/menu.ejs') %>
            <div class="right-main uses-main">
                <!-- 右边上部 -->
                <div class="iptBox">
                    <form action="/users/search" method="POST">
                        <p>
                            <input type="text" class="iptText" name="iptText">
                            <input type="submit" value="搜索" class="iptSub">
                        </p>
                    </form>
                </div>
                <div class="bs-example" data-example-id="contextual-table">
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>序号</th>
                                <th>用户名</th>
                                <th>用户昵称</th>
                                <th>手机号码</th>
                                <th>性别</th>
                                <th>年龄</th>
                                <th>是否管理员</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for(var i = 0; i < list.length; i++) {%>
                            <tr class="active" scope="row">
                                <th>
                                    <%= i+1 %>
                                </th>
                                <td>
                                    <%= list[i].username %>
                                </td>
                                <td>
                                    <%= list[i].nickname %>
                                </td>
                                <td>
                                    <%= list[i].phonename %>
                                </td>
                                <td>
                                    <%= list[i].sex %>
                                </td>
                                <td>
                                    <%= list[i].age %>
                                </td>
                                <td>
                                    <%= list[i].isAdmin %>
                                </td>
                                <td>
                                    <% if(list[i].nickname){ %>
                                    <span class="<%= list[i]._id%>" id="xiuGaiName" style="cursor:pointer">修改</span>

                                    <span><a href="/users/delete?id=<%= list[i]._id %>">删除</a></span>
                                    <% } %>
                                </td>
                            </tr>
                            <%}%>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <nav aria-label="..." class="nav-fenYe">
                    <ul class="pagination pagination-sm ul1">
                        <li>
                            <a href="/users?page=<%= currentPage - 1 < 1 ? 1: currentPage - 1 %>&pageSize=<%= pageSize %>"
                                aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <% for (var i = 0; i < totalPage ; i++) {%>
                        <li class="<%= currentPage === (i+1) ? 'active': '' %>">
                            <a href="/users?page=<%= i+1 %>&pageSize=<%= pageSize %>">
                                <%= i + 1%></a>
                        </li>

                        <%}%>
                        <li>
                            <a href="/users?page=<%= currentPage + 1 > totalPage ? totalPage: currentPage + 1 %>&pageSize=<%= pageSize %>"
                                aria-label="Next" aria-label="Next">
                                <span aria-hidden="true">»</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

        </div>

        <!-- 修改 -->
        <div class="newPhoneBox">
            <div class="newH2box">
                <h2>用户信息修改</h2>
            </div>
            <div class="newInputBox">
                <form action="/users/userAlter" method="POST" enctype="multipart/form-data">
                    <p>
                        <label>
                            <span>用户Id名:</span>
                            <input type="text" name="phoneName" id="userPhone">
                        </label>
                    </p>
                    <p>
                        <label>
                            <span>用户名:</span>
                            <input type="text" name="userName1" id="userPhone1">
                        </label>
                    </p>
                    <p>
                        <label>
                            <span>用户昵称:</span>
                            <input type="text" name="userName2">

                        </label>
                    </p>
                    <p>
                        <label>
                            <span>手机号码:</span>
                            <input type="text" name="Msrpname">
                        </label>
                    </p>
                    <p>
                        <label>
                            <span>性别:</span>
                            <input type="text" name="ErshouMsrp">
                        </label>
                    </p>
                    <p>
                        <span>年龄:</span>
                        <input type="text" name="ageName">
                    </p>
                    <p>
                        <span>是否管理员:</span>
                        <input type="text" name="isAdmin">
                    </p>
                    <p style="text-align:center;">
                        <input type="submit" value="修改" class="btnBox" name="btnName1" id="btnBox1">
                        <input type="button" value="取消" class="btnBox" name="btnName2" id="btnBox2">
                    </p>
                </form>
            </div>
        </div>




        <!-- 底部 -->
        <%- include('./common/foot.ejs') %>
    </div>
</body>

</html>
<script src="/jquery-1.12.4.min.js"></script>
<script>
    // 有开关就要判断
    var flag = true;
    $("span[id=xiuGaiName]").click(function () {
        if (flag) {
            $(".newPhoneBox").show();
            $("#userPhone").val($(this).prop('className'));
            flag = false;
        } else {
            $(".newPhoneBox").hide();
            flag = true;
        }
    });
    //取消点击
    $("#btnBox2").click(function () {
        $(".newPhoneBox").hide();
        flag = true;
    });
</script>